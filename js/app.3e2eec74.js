(function(){"use strict";var e={5699:function(e,a,t){var n=t(5130),i=t(6768);function r(e,a,t,n,r,s){const o=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.Wv)(o)}var s={name:"App"},o=t(1241);const l=(0,o.A)(s,[["render",r]]);var c=l,d=t(1387),u=t(4232);const m=e=>((0,i.Qi)("data-v-0f59328b"),e=e(),(0,i.jt)(),e),h={class:"header"},p={class:"features-main-container"},g={class:"container"},v={class:"row"},f={class:"output"},k=["src"],y={class:"col-lg-6"},b={class:"container-image-main"},L=["src"],C={key:0,class:"container-image-position"},w=["src"],S={class:"container-image-position"},x={ref:"video",autoplay:""},T={ref:"canvas",style:{display:"none"}},E={key:1,class:"range-slider-position"},I={class:"text-center"},q=m((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{fill:"currentColor",d:"m9.5 16.5l7-4.5l-7-4.5zM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"})],-1))),j=[q],$=m((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{fill:"currentColor",d:"M9 16h2V8H9zm4 0h2V8h-2zm-1 6q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"})],-1))),X=[$],F={key:2,class:"image-summary",style:{"max-width":"270px"}},N={class:"col-lg-5"},O={class:"container-image-main-content"},_={key:0},A=m((()=>(0,i.Lk)("h2",{class:"mb-3"},"Narration Summary",-1))),P={class:"summary-text-flex"},U={class:"mb-0"},z=m((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",viewBox:"0 0 24 24"},[(0,i.Lk)("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[(0,i.Lk)("path",{d:"M7 9.667A2.667 2.667 0 0 1 9.667 7h8.666A2.667 2.667 0 0 1 21 9.667v8.666A2.667 2.667 0 0 1 18.333 21H9.667A2.667 2.667 0 0 1 7 18.333z"}),(0,i.Lk)("path",{d:"M4.012 16.737A2.005 2.005 0 0 1 3 15V5c0-1.1.9-2 2-2h10c.75 0 1.158.385 1.5 1"})])],-1))),M=[z],Q={key:1,class:"row mb-md-5 mb-0"},B={class:"col-md-6 upload-image-margin"},R={key:0,class:"upload-image-container bg-black-dark"},V=["src"],D=m((()=>(0,i.Lk)("h3",null,"Camera feed",-1))),H=m((()=>(0,i.Lk)("a",{href:"#"},"Live",-1))),W=m((()=>(0,i.Lk)("p",null,"Connect Camera",-1))),J=[W],K={class:"col-md-6 upload-image-margin"},G={key:0,class:"upload-image-container bg-black-dark"},Y=["src"],Z=m((()=>(0,i.Lk)("a",{href:"#"},"Uploaded",-1))),ee={key:1,class:"upload-image-container"},ae=m((()=>(0,i.Lk)("p",null,"Upload Image",-1))),te={key:2,class:"row mb-md-5 mb-0"},ne={key:0,class:"col-md-6 upload-image-margin"},ie={class:"upload-image-container bg-black-dark"},re=["src"],se=m((()=>(0,i.Lk)("h3",null,"Camera feed",-1))),oe=m((()=>(0,i.Lk)("a",{href:"#"},"Live",-1))),le={key:1,class:"col-md-6 upload-image-margin"},ce={class:"upload-image-container bg-black-dark"},de=["src"],ue=m((()=>(0,i.Lk)("a",{href:"#"},"Uploaded",-1))),me={key:3,class:"col-lg-8"},he={class:"progress-main"},pe=m((()=>(0,i.Lk)("label",{for:"narration-length"},"Narration length",-1))),ge={key:0},ve=(0,i.Fv)('<div class="social-media-container" data-v-0f59328b><div class="social-media-container-flex" data-v-0f59328b><div class="copy-btn" data-v-0f59328b><svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" data-v-0f59328b><path fill="currentColor" d="M10.59 13.41c.41.39.41 1.03 0 1.42c-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24a.973.973 0 0 1 0-1.42" data-v-0f59328b></path></svg></div><div class="social-media-text" data-v-0f59328b><h2 data-v-0f59328b>Copy link</h2><p data-v-0f59328b>Al-narrated video 1</p></div></div><button class="share-btn" data-v-0f59328b><svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" data-v-0f59328b><path fill="currentColor" d="m11.293 17.293l1.414 1.414L19.414 12l-6.707-6.707l-1.414 1.414L15.586 11H6v2h9.586z" data-v-0f59328b></path></svg></button></div>',1),fe={class:"last-button"},ke={key:1,class:"last-button"},ye=["disabled"];function be(e,a,t,r,s,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("header",h,[(0,i.Lk)("h2",null,(0,u.v_)(s.name),1),(0,i.Lk)("button",{class:"btn",onClick:a[0]||(a[0]=(...e)=>o.create&&o.create(...e))},"Create")]),(0,i.Lk)("div",p,[(0,i.Lk)("div",g,[(0,i.Lk)("div",v,[(0,i.Lk)("div",f,[(0,i.Lk)("audio",{class:"d-none",controls:"",src:s.audioSrc,ref:"audio",onTimeupdate:a[1]||(a[1]=(...e)=>o.updateProgressBar&&o.updateProgressBar(...e))},null,40,k)]),(0,i.Lk)("div",y,[(0,i.Lk)("div",b,[(0,i.Lk)("img",{src:s.processing?s.processingMainImgSrc:s.mainImgSrc,alt:"main-img",class:"main-img"},null,8,L),s.isNarration||""!=s.selectedImageSrc?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("img",{src:s.selectedImageSrc,alt:"cartoon-image"},null,8,w)])):(0,i.Q3)("",!0),(0,i.Lk)("div",S,[(0,i.Lk)("video",x,null,512),(0,i.Lk)("canvas",T,null,512)]),s.isNarration?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.Lk)("div",I,[s.audioPlay?((0,i.uX)(),(0,i.CE)("button",{key:1,class:"play-btn",onClick:a[3]||(a[3]=e=>o.handleAudio("pause"))},X)):((0,i.uX)(),(0,i.CE)("button",{key:0,class:"play-btn",onClick:a[2]||(a[2]=e=>o.handleAudio("play"))},j))])])):(0,i.Q3)("",!0),s.isNarration?((0,i.uX)(),(0,i.CE)("div",F)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",N,[(0,i.Lk)("div",O,[(0,i.Lk)("div",null,[s.isNarration?((0,i.uX)(),(0,i.CE)("div",_,[A,(0,i.Lk)("div",P,[(0,i.Lk)("p",U,(0,u.v_)(s.transcript),1),(0,i.Lk)("button",{class:"copy-btn",onClick:a[4]||(a[4]=(...e)=>o.copySummary&&o.copySummary(...e))},M)])])):(0,i.Q3)("",!0),(0,i.Lk)("h2",null,(0,u.v_)(s.isNarration?"Channel used":"Select channel"),1),s.isNarration?((0,i.uX)(),(0,i.CE)("div",te,["camera"==s.selectedChannel?((0,i.uX)(),(0,i.CE)("div",ne,[(0,i.Lk)("div",ie,[(0,i.Lk)("img",{src:s.cameraRollImgSrc,alt:""},null,8,re),se,oe])])):(0,i.Q3)("",!0),"upload"==s.selectedChannel?((0,i.uX)(),(0,i.CE)("div",le,[(0,i.Lk)("div",ce,[(0,i.Lk)("img",{src:s.selectedImageSrc,alt:""},null,8,de),(0,i.Lk)("h3",null,(0,u.v_)(s.selectedFile?.name),1),ue,(0,i.Lk)("input",{type:"file",ref:"fileInput",class:"file-upload-main",onChange:a[8]||(a[8]=(...e)=>o.handleFileChange&&o.handleFileChange(...e))},null,544)])])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("div",B,["camera"==s.selectedChannel?((0,i.uX)(),(0,i.CE)("div",R,[(0,i.Lk)("img",{src:s.cameraRollImgSrc,alt:""},null,8,V),D,H])):((0,i.uX)(),(0,i.CE)("div",{key:1,class:"upload-image-container",onClick:a[5]||(a[5]=(...e)=>o.startCamera&&o.startCamera(...e))},J))]),(0,i.Lk)("div",K,["upload"==s.selectedChannel?((0,i.uX)(),(0,i.CE)("div",G,[(0,i.Lk)("img",{src:s.selectedImageSrc,alt:""},null,8,Y),(0,i.Lk)("h3",null,(0,u.v_)(s.selectedFile?.name),1),Z,(0,i.Lk)("input",{type:"file",ref:"fileInput",class:"file-upload-main",onChange:a[6]||(a[6]=(...e)=>o.handleFileChange&&o.handleFileChange(...e))},null,544)])):((0,i.uX)(),(0,i.CE)("div",ee,[(0,i.Lk)("input",{type:"file",ref:"fileInput",class:"file-upload-main",onChange:a[7]||(a[7]=(...e)=>o.handleFileChange&&o.handleFileChange(...e))},null,544),ae]))])])),s.isNarration?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",me,[(0,i.Lk)("div",he,[pe,(0,i.bo)((0,i.Lk)("input",{type:"range",class:"progress-bar-main","onUpdate:modelValue":a[9]||(a[9]=e=>s.narrationLength=e)},null,512),[[n.Jo,s.narrationLength]])])]))]),s.isNarration?((0,i.uX)(),(0,i.CE)("div",ge,[ve,(0,i.Lk)("div",fe,[(0,i.Lk)("button",{class:"bottom-btn",onClick:a[10]||(a[10]=(...e)=>o.downloadVideo&&o.downloadVideo(...e))},"Download")])])):((0,i.uX)(),(0,i.CE)("div",ke,[(0,i.Lk)("button",{class:"bottom-btn",onClick:a[11]||(a[11]=(...e)=>o.generateNarration&&o.generateNarration(...e)),disabled:s.processing},(0,u.v_)(1==s.processing?"Thinking...":"Let's hear it."),9,ye)]))])])])])])])}t(4114),t(4603),t(7566),t(8721);var Le=t(2125),Ce=t.n(Le),we=t(7891),Se={name:"ShortenForm",data(){return{name:"Kazuya",processingMainImgSrc:t(3815),mainImgSrc:t(1086),cartoonImgSrc:t(1816),cameraRollImgSrc:t(4021),narrationLength:25,narrationSummaryLink:"narration-summary",selectedChannel:"camera",selectedImageSrc:"",selectedFile:"",transcript:"",audioSrc:"",processing:!1,isNarration:!1,currentTime:0,duration:0,backgroundSize:"0% 100%",audioPlay:!1}},mounted(){this.startCamera()},watch:{currentTime(e){this.isNarration&&this.duration<=e&&(this.audioPlay=!1)}},methods:{async startCamera(){const e={video:!0};try{const a=await navigator.mediaDevices.getUserMedia(e);this.$refs.video.srcObject=a,this.selectedChannel="camera"}catch(a){console.error("Error accessing camera: ",a)}},async stopCamera(){const e=this.$refs.video,a=e.srcObject;if(a){const t=a.getTracks();t.forEach((e=>e.stop())),e.srcObject=null}},formattedTime(e){const a=e=>`0${Math.floor(e)}`.slice(-2),t=e%3600/60,n=e%60;return`${a(t)}:${a(n)}`},updateProgressBar(e){const a=e.target;this.currentTime=a.currentTime,this.duration=a.duration},async generateNarration(){try{this.processing=!0;let e=new FormData;"upload"==this.selectedChannel?(e.append("file",this.selectedFile),await this.sendImageToServer(e)):(this.$refs.canvas.width=this.$refs.video.videoWidth,this.$refs.canvas.height=this.$refs.video.videoHeight,this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0),this.$refs.canvas.toBlob((async a=>{e.append("file",a,"image.jpeg"),this.selectedChannel="camera",this.selectedImageSrc=URL.createObjectURL(a),await this.stopCamera(),await this.sendImageToServer(e)}),"image/jpeg"))}catch(e){console.error("Error sending image to server: ",e),this.processing=!1}},async typedSummary(){if(this.transcript){const e=this.transcript.split(/\s+/);let a=[];const t=5;for(let n=0;n<e.length;n+=t){let i=e.slice(n,n+t).join(" ");a.push(i)}new we.A(".image-summary",{strings:a,showCursor:!1,loop:!1,typeSpeed:20,startSpeed:2,startDelay:100})}},async sendImageToServer(e){try{const a=await fetch("https://oyzekbotvh.execute-api.ap-northeast-1.amazonaws.com/prod/app/narration/123487",{method:"POST",body:e}),t=await a.json();this.transcript=t.response.transcript,this.audioSrc=t.response.audio_file,this.isNarration=!0,this.$nextTick((()=>{this.$refs.audio.play(),this.audioPlay=!0,this.processing=!1,this.typedSummary()}))}catch(a){console.error("Error sending image to server: ",a),this.processing=!1}},copySummary(){const e=document.createElement("textarea");e.value=this.transcript,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},async handleFileChange(){await this.stopCamera(),this.transcript="",this.audioSrc="",this.isNarration=!1,this.selectedFile=this.$refs.fileInput.files[0],this.selectedFile&&(this.selectedChannel="upload",this.selectedImageSrc=URL.createObjectURL(this.selectedFile))},updateSlider(e){let a=e.target,t=a.min,n=a.max,i=a.value;this.backgroundSize=100*(i-t)/(n-t)+"% 100%";const r=this.$refs.audio;r.currentTime=event.target.value,this.$nextTick((()=>{this.$refs.audio.play()}))},handleAudio(e){this.audioPlay=!this.audioPlay,"pause"==e?this.$refs.audio.pause():"play"==e&&this.$refs.audio.play()},create(){this.transcript="",this.audioSrc="",this.isNarration=!1,this.selectedImageSrc="",this.selectedChannel="camera",this.startCamera()},async downloadVideo(){const e=document.querySelector(".container-image-main");console.log("container",e);const a=await Ce()(e);console.log("canvas",a);const t=a.toDataURL("image/jpeg");console.log("dataURL",t);const n=document.createElement("a");n.href=t,n.download="video.mp4",n.click()}}};const xe=(0,o.A)(Se,[["render",be],["__scopeId","data-v-0f59328b"]]);var Te=xe;const Ee=[{path:"/",name:"home",component:Te}],Ie=(0,d.aE)({history:(0,d.LA)("/"),routes:Ee});var qe=Ie;t(323);(0,n.Ef)(c).use(qe).mount("#app")},4021:function(e,a,t){e.exports=t.p+"img/camera-roll.d4f36213.jpg"},1816:function(e,a,t){e.exports=t.p+"img/cartton.ce9bc863.jpeg"},3815:function(e,a,t){e.exports=t.p+"img/processing_tv_image.378a2989.jpeg"},1086:function(e,a,t){e.exports=t.p+"img/tv-image.3deea5cb.jpg"}},a={};function t(n){var i=a[n];if(void 0!==i)return i.exports;var r=a[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,n,i,r){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],r=e[d][2];for(var o=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](n[l])}))?n.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(d--,1);var c=i();void 0!==c&&(a=c)}}return a}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,i,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var i,r,s=n[0],o=n[1],l=n[2],c=0;if(s.some((function(a){return 0!==e[a]}))){for(i in o)t.o(o,i)&&(t.m[i]=o[i]);if(l)var d=l(t)}for(a&&a(n);c<s.length;c++)r=s[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},n=self["webpackChunkmock_bot"]=self["webpackChunkmock_bot"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(5699)}));n=t.O(n)})();
//# sourceMappingURL=app.3e2eec74.js.map