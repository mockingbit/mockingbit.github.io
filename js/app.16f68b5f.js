(function(){"use strict";var e={5517:function(e,a,t){var n=t(5130),r=t(6768);function i(e,a,t,n,i,s){const o=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(o)}var s={name:"App"},o=t(1241);const c=(0,o.A)(s,[["render",i]]);var l=c,d=t(1387),u=t(4232);const m=e=>((0,r.Qi)("data-v-617d7c56"),e=e(),(0,r.jt)(),e),h={class:"header"},p={class:"features-main-container"},g={class:"container"},v={class:"row"},f={class:"output"},k=["src"],y={class:"col-lg-6"},L={class:"container-image-main"},b=["src"],C={key:0,class:"container-image-position"},w=["src"],S={class:"container-image-position"},x={ref:"video",autoplay:""},I={ref:"canvas",style:{display:"none"}},E={key:1,class:"range-slider-position"},T=["max"],j={class:"time-indicator"},$={key:2,class:"image-summary",style:{"max-width":"270px"}},F={class:"col-lg-5"},N={class:"container-image-main-content"},O={key:0},X=m((()=>(0,r.Lk)("h2",{class:"mb-3"},"Narration Summary",-1))),_={class:"summary-text-flex"},U={class:"mb-0"},z=m((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",viewBox:"0 0 24 24"},[(0,r.Lk)("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[(0,r.Lk)("path",{d:"M7 9.667A2.667 2.667 0 0 1 9.667 7h8.666A2.667 2.667 0 0 1 21 9.667v8.666A2.667 2.667 0 0 1 18.333 21H9.667A2.667 2.667 0 0 1 7 18.333z"}),(0,r.Lk)("path",{d:"M4.012 16.737A2.005 2.005 0 0 1 3 15V5c0-1.1.9-2 2-2h10c.75 0 1.158.385 1.5 1"})])],-1))),A=[z],M={key:1,class:"row mb-md-5 mb-0"},R={class:"col-md-6 upload-image-margin"},Q={key:0,class:"upload-image-container bg-black-dark"},B=["src"],P=m((()=>(0,r.Lk)("h3",null,"Camera feed",-1))),V=m((()=>(0,r.Lk)("a",{href:"#"},"Live",-1))),D=m((()=>(0,r.Lk)("p",null,"Connect Camera",-1))),H=[D],J={class:"col-md-6 upload-image-margin"},W={key:0,class:"upload-image-container bg-black-dark"},q=["src"],K=m((()=>(0,r.Lk)("a",{href:"#"},"Uploaded",-1))),G={key:1,class:"upload-image-container"},Y=m((()=>(0,r.Lk)("p",null,"Upload Image",-1))),Z={key:2,class:"row mb-md-5 mb-0"},ee={key:0,class:"col-md-6 upload-image-margin"},ae={class:"upload-image-container bg-black-dark"},te=["src"],ne=m((()=>(0,r.Lk)("h3",null,"Camera feed",-1))),re=m((()=>(0,r.Lk)("a",{href:"#"},"Live",-1))),ie={key:1,class:"col-md-6 upload-image-margin"},se={class:"upload-image-container bg-black-dark"},oe=["src"],ce=m((()=>(0,r.Lk)("a",{href:"#"},"Uploaded",-1))),le={key:3,class:"col-lg-8"},de={class:"progress-main"},ue=m((()=>(0,r.Lk)("label",{for:"narration-length"},"Narration length",-1))),me={key:0},he=(0,r.Fv)('<div class="social-media-container" data-v-617d7c56><div class="social-media-container-flex" data-v-617d7c56><div class="copy-btn" data-v-617d7c56><svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" data-v-617d7c56><path fill="currentColor" d="M10.59 13.41c.41.39.41 1.03 0 1.42c-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24a.973.973 0 0 1 0-1.42" data-v-617d7c56></path></svg></div><div class="social-media-text" data-v-617d7c56><h2 data-v-617d7c56>Copy link</h2><p data-v-617d7c56>Al-narrated video 1</p></div></div><button class="share-btn" data-v-617d7c56><svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" data-v-617d7c56><path fill="currentColor" d="m11.293 17.293l1.414 1.414L19.414 12l-6.707-6.707l-1.414 1.414L15.586 11H6v2h9.586z" data-v-617d7c56></path></svg></button></div>',1),pe={class:"last-button"},ge={key:1,class:"last-button"},ve=["disabled"];function fe(e,a,t,i,s,o){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("header",h,[(0,r.Lk)("h2",null,(0,u.v_)(s.name),1),(0,r.Lk)("button",{class:"btn",onClick:a[0]||(a[0]=(...e)=>o.create&&o.create(...e))},"Create")]),(0,r.Lk)("div",p,[(0,r.Lk)("div",g,[(0,r.Lk)("div",v,[(0,r.Lk)("div",f,[(0,r.Lk)("audio",{class:"d-none",controls:"",src:s.audioSrc,ref:"audio",onTimeupdate:a[1]||(a[1]=(...e)=>o.updateProgressBar&&o.updateProgressBar(...e))},null,40,k)]),(0,r.Lk)("div",y,[(0,r.Lk)("div",L,[(0,r.Lk)("img",{src:s.processing?s.processingMainImgSrc:s.mainImgSrc,alt:"main-img",class:"main-img"},null,8,b),s.isNarration||""!=s.selectedImageSrc?((0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("img",{src:s.selectedImageSrc,alt:"cartoon-image"},null,8,w)])):(0,r.Q3)("",!0),(0,r.Lk)("div",S,[(0,r.Lk)("video",x,null,512),(0,r.Lk)("canvas",I,null,512)]),s.isNarration?((0,r.uX)(),(0,r.CE)("div",E,[(0,r.bo)((0,r.Lk)("input",{type:"range",step:"0.001",ref:"rangeInput",class:"progress-bar-custom",min:"0",max:s.duration,"onUpdate:modelValue":a[2]||(a[2]=e=>s.currentTime=e),onInput:a[3]||(a[3]=(...e)=>o.updateSlider&&o.updateSlider(...e)),style:(0,u.Tr)({backgroundSize:s.backgroundSize})},null,44,T),[[n.Jo,s.currentTime]]),(0,r.Lk)("div",j,[(0,r.Lk)("span",null,(0,u.v_)(o.formattedTime(s.currentTime)),1),(0,r.Lk)("span",null,(0,u.v_)(o.formattedTime(s.duration)),1)])])):(0,r.Q3)("",!0),s.isNarration?((0,r.uX)(),(0,r.CE)("div",$)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",F,[(0,r.Lk)("div",N,[(0,r.Lk)("div",null,[s.isNarration?((0,r.uX)(),(0,r.CE)("div",O,[X,(0,r.Lk)("div",_,[(0,r.Lk)("p",U,(0,u.v_)(s.transcript),1),(0,r.Lk)("button",{class:"copy-btn",onClick:a[4]||(a[4]=(...e)=>o.copySummary&&o.copySummary(...e))},A)])])):(0,r.Q3)("",!0),(0,r.Lk)("h2",null,(0,u.v_)(s.isNarration?"Channel used":"Select channel"),1),s.isNarration?((0,r.uX)(),(0,r.CE)("div",Z,["camera"==s.selectedChannel?((0,r.uX)(),(0,r.CE)("div",ee,[(0,r.Lk)("div",ae,[(0,r.Lk)("img",{src:s.cameraRollImgSrc,alt:""},null,8,te),ne,re])])):(0,r.Q3)("",!0),"upload"==s.selectedChannel?((0,r.uX)(),(0,r.CE)("div",ie,[(0,r.Lk)("div",se,[(0,r.Lk)("img",{src:s.selectedImageSrc,alt:""},null,8,oe),(0,r.Lk)("h3",null,(0,u.v_)(s.selectedFile?.name),1),ce,(0,r.Lk)("input",{type:"file",ref:"fileInput",class:"file-upload-main",onChange:a[8]||(a[8]=(...e)=>o.handleFileChange&&o.handleFileChange(...e))},null,544)])])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("div",R,["camera"==s.selectedChannel?((0,r.uX)(),(0,r.CE)("div",Q,[(0,r.Lk)("img",{src:s.cameraRollImgSrc,alt:""},null,8,B),P,V])):((0,r.uX)(),(0,r.CE)("div",{key:1,class:"upload-image-container",onClick:a[5]||(a[5]=(...e)=>o.startCamera&&o.startCamera(...e))},H))]),(0,r.Lk)("div",J,["upload"==s.selectedChannel?((0,r.uX)(),(0,r.CE)("div",W,[(0,r.Lk)("img",{src:s.selectedImageSrc,alt:""},null,8,q),(0,r.Lk)("h3",null,(0,u.v_)(s.selectedFile?.name),1),K,(0,r.Lk)("input",{type:"file",ref:"fileInput",class:"file-upload-main",onChange:a[6]||(a[6]=(...e)=>o.handleFileChange&&o.handleFileChange(...e))},null,544)])):((0,r.uX)(),(0,r.CE)("div",G,[(0,r.Lk)("input",{type:"file",ref:"fileInput",class:"file-upload-main",onChange:a[7]||(a[7]=(...e)=>o.handleFileChange&&o.handleFileChange(...e))},null,544),Y]))])])),s.isNarration?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",le,[(0,r.Lk)("div",de,[ue,(0,r.bo)((0,r.Lk)("input",{type:"range",class:"progress-bar-main","onUpdate:modelValue":a[9]||(a[9]=e=>s.narrationLength=e)},null,512),[[n.Jo,s.narrationLength]])])]))]),s.isNarration?((0,r.uX)(),(0,r.CE)("div",me,[he,(0,r.Lk)("div",pe,[(0,r.Lk)("button",{class:"bottom-btn",onClick:a[10]||(a[10]=(...e)=>o.downloadVideo&&o.downloadVideo(...e))},"Download")])])):((0,r.uX)(),(0,r.CE)("div",ge,[(0,r.Lk)("button",{class:"bottom-btn",onClick:a[11]||(a[11]=(...e)=>o.generateNarration&&o.generateNarration(...e)),disabled:s.processing},(0,u.v_)(1==s.processing?"Thinking...":"Let's hear it."),9,ve)]))])])])])])])}t(4114),t(4603),t(7566),t(8721);var ke=t(2125),ye=t.n(ke),Le=t(7891),be={name:"ShortenForm",data(){return{name:"Kazuya",processingMainImgSrc:t(3815),mainImgSrc:t(1086),cartoonImgSrc:t(1816),cameraRollImgSrc:t(4021),narrationLength:25,narrationSummaryLink:"narration-summary",selectedChannel:"camera",selectedImageSrc:"",selectedFile:"",transcript:"",audioSrc:"",processing:!1,isNarration:!1,currentTime:0,duration:0,backgroundSize:"0% 100%"}},mounted(){this.startCamera()},watch:{currentTime(){if(this.isNarration){const e=this.$refs.rangeInput;let a=e,t=a.max,n=a.value;this.backgroundSize=Math.floor(n)/Math.floor(t)*100+"% 100%",console.log(this.backgroundSize)}}},methods:{async startCamera(){const e={video:!0};try{const a=await navigator.mediaDevices.getUserMedia(e);this.$refs.video.srcObject=a,this.selectedChannel="camera"}catch(a){console.error("Error accessing camera: ",a)}},async stopCamera(){const e=this.$refs.video,a=e.srcObject;if(a){const t=a.getTracks();t.forEach((e=>e.stop())),e.srcObject=null}},formattedTime(e){const a=e=>`0${Math.floor(e)}`.slice(-2),t=e%3600/60,n=e%60;return`${a(t)}:${a(n)}`},updateProgressBar(e){const a=e.target;this.currentTime=a.currentTime,this.duration=a.duration},async generateNarration(){try{this.processing=!0;let e=new FormData;"upload"==this.selectedChannel?(e.append("file",this.selectedFile),await this.sendImageToServer(e)):(this.$refs.canvas.width=this.$refs.video.videoWidth,this.$refs.canvas.height=this.$refs.video.videoHeight,this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0),this.$refs.canvas.toBlob((async a=>{e.append("file",a,"image.jpeg"),this.selectedChannel="camera",this.selectedImageSrc=URL.createObjectURL(a),await this.stopCamera(),await this.sendImageToServer(e)}),"image/jpeg"))}catch(e){console.error("Error sending image to server: ",e),this.processing=!1}},async typedSummary(){if(this.transcript){const e=this.transcript.split(/\s+/);let a=[];const t=5;for(let n=0;n<e.length;n+=t){let r=e.slice(n,n+t).join(" ");a.push(r)}new Le.A(".image-summary",{strings:a,showCursor:!1,loop:!1,typeSpeed:20,startSpeed:2,startDelay:100})}},async sendImageToServer(e){try{const a=await fetch("https://oyzekbotvh.execute-api.ap-northeast-1.amazonaws.com/prod/app/narration/123487",{method:"POST",body:e}),t=await a.json();this.transcript=t.response.transcript,this.audioSrc=t.response.audio_file,this.isNarration=!0,this.$nextTick((()=>{this.$refs.audio.play(),this.processing=!1,this.typedSummary()}))}catch(a){console.error("Error sending image to server: ",a),this.processing=!1}},copySummary(){const e=document.createElement("textarea");e.value=this.transcript,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},async handleFileChange(){await this.stopCamera(),this.transcript="",this.audioSrc="",this.isNarration=!1,this.selectedFile=this.$refs.fileInput.files[0],this.selectedFile&&(this.selectedChannel="upload",this.selectedImageSrc=URL.createObjectURL(this.selectedFile))},updateSlider(e){let a=e.target,t=a.min,n=a.max,r=a.value;this.backgroundSize=100*(r-t)/(n-t)+"% 100%";const i=this.$refs.audio;i.currentTime=event.target.value,this.$nextTick((()=>{this.$refs.audio.play()}))},create(){this.transcript="",this.audioSrc="",this.isNarration=!1,this.selectedImageSrc="",this.selectedChannel="camera",this.startCamera()},async downloadVideo(){const e=document.querySelector(".container-image-main");console.log("container",e);const a=await ye()(e);console.log("canvas",a);const t=a.toDataURL("image/jpeg");console.log("dataURL",t);const n=document.createElement("a");n.href=t,n.download="video.mp4",n.click()}}};const Ce=(0,o.A)(be,[["render",fe],["__scopeId","data-v-617d7c56"]]);var we=Ce;const Se=[{path:"/",name:"home",component:we}],xe=(0,d.aE)({history:(0,d.LA)("/"),routes:Se});var Ie=xe;t(323);(0,n.Ef)(l).use(Ie).mount("#app")},4021:function(e,a,t){e.exports=t.p+"img/camera-roll.d4f36213.jpg"},1816:function(e,a,t){e.exports=t.p+"img/cartton.ce9bc863.jpeg"},3815:function(e,a,t){e.exports=t.p+"img/processing_tv_image.378a2989.jpeg"},1086:function(e,a,t){e.exports=t.p+"img/tv-image.3deea5cb.jpg"}},a={};function t(n){var r=a[n];if(void 0!==r)return r.exports;var i=a[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(a,n,r,i){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],i=e[d][2];for(var o=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[c])}))?n.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(d--,1);var l=r();void 0!==l&&(a=l)}}return a}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,r,i]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var r,i,s=n[0],o=n[1],c=n[2],l=0;if(s.some((function(a){return 0!==e[a]}))){for(r in o)t.o(o,r)&&(t.m[r]=o[r]);if(c)var d=c(t)}for(a&&a(n);l<s.length;l++)i=s[l],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},n=self["webpackChunkmock_bot"]=self["webpackChunkmock_bot"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(5517)}));n=t.O(n)})();
//# sourceMappingURL=app.16f68b5f.js.map